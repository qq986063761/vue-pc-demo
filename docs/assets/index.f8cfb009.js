var j=Object.defineProperty,N=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var B=(t,e,n)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||(e={}))F.call(e,n)&&B(t,n,e[n]);if(H)for(var n of H(e))Q.call(e,n)&&B(t,n,e[n]);return t},C=(t,e)=>N(t,q(e));import{C as G,r as h,o as a,c as k,w as d,a as m,b as u,d as v,e as c,t as y,F as S,f as X,g as J,h as Z,i as tt,j as w,v as b,k as T,l as et,m as x,n as g,p as W,q as st,A as it}from"./vendor.284fc6e9.js";const nt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};nt();var ot="./assets/avatar.37e52ddd.jpg";var L=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n};const rt={components:{CalculatorOutlined:G},data(){return{avatar:ot,selectedKeys:["comment"],openKeys:["comp"],menus:[{label:"\u7EC4\u4EF6",key:"comp",children:[{key:"comment",label:"\u8BC4\u8BBA"},{key:"scrollBar",label:"\u60AC\u6D6E\u6EDA\u52A8\u6761"},{key:"scaleTool",label:"\u62D6\u62FD\u7F29\u653E\u63A7\u4EF6"}]},{label:"\u6307\u4EE4",key:"dir",children:[{key:"disableRepeatClick",label:"\u9632\u91CD\u590D\u70B9\u51FB"},{key:"drag",label:"\u62D6\u62FD"},{key:"reasonablePosItem",label:"\u6FC0\u6D3B\u5230\u5408\u9002\u7684item"}]},{label:"demo",key:"demo",children:[{key:"carousel",label:"\u8F6E\u64AD"}]}]}},methods:{onSelect({item:t,key:e,selectedKeys:n}){console.log({item:t,key:e,selectedKeys:n}),this.$router.push({name:e})}}};function lt(t,e,n,i,s,o){const r=h("a-avatar"),l=h("calculator-outlined"),f=h("a-menu-item"),_=h("a-sub-menu"),M=h("a-menu"),U=h("a-layout-sider"),V=h("router-view"),K=h("a-layout-content"),$=h("a-layout");return a(),k($,{class:"root-wrap"},{default:d(()=>[m(U,{collapsible:""},{default:d(()=>[m(r,{src:s.avatar,size:60},null,8,["src"]),m(M,{theme:"dark",mode:"inline",openKeys:s.openKeys,"onUpdate:openKeys":e[0]||(e[0]=p=>s.openKeys=p),selectedKeys:s.selectedKeys,"onUpdate:selectedKeys":e[1]||(e[1]=p=>s.selectedKeys=p),onSelect:o.onSelect},{default:d(()=>[(a(!0),u(S,null,v(s.menus,p=>(a(),k(_,{key:p.key},{title:d(()=>[m(l),c("span",null,y(p.label),1)]),default:d(()=>[(a(!0),u(S,null,v(p.children,Y=>(a(),k(f,{key:Y.key},{default:d(()=>[X(y(Y.label),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1},8,["openKeys","selectedKeys","onSelect"])]),_:1}),m(K,null,{default:d(()=>[m(V,{class:"root-view"})]),_:1})]),_:1})}var ct=L(rt,[["render",lt]]);const at="modulepreload",A={},ht="./",E=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${ht}${i}`,i in A)return;A[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":at,s||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),s)return new Promise((l,f)=>{r.addEventListener("load",l),r.addEventListener("error",f)})})).then(()=>e())};var ft=J({history:Z(),routes:[{path:"/",redirect:"/comment"},{path:"/comment",name:"comment",component:()=>E(()=>import("./comment.c42604ef.js"),["assets/comment.c42604ef.js","assets/vendor.284fc6e9.js"])},{path:"/carousel",name:"carousel",component:()=>E(()=>import("./carousel.84737b8e.js"),["assets/carousel.84737b8e.js","assets/carousel.71f7a119.css","assets/vendor.284fc6e9.js"])},{path:"/scrollBar",name:"scrollBar",component:()=>E(()=>import("./scrollBar.5a3358ec.js"),["assets/scrollBar.5a3358ec.js","assets/scrollBar.95c50ac2.css","assets/vendor.284fc6e9.js"])},{path:"/scaleTool",name:"scaleTool",component:()=>E(()=>import("./scaleTool.71225f51.js"),["assets/scaleTool.71225f51.js","assets/scaleTool.c6bce0f6.css","assets/vendor.284fc6e9.js"])}]});const dt=function(t){for(let e of t){const n=e.target.__resizeListeners__||[];n.length&&n.forEach(i=>{i()})}};function ut(t,e){t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new tt(dt),t.__ro__.observe(t)),t.__resizeListeners__.push(e)}function mt(t,e){!t||!t.__resizeListeners__||(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())}function pt(t,e){if(window.getSelection){if(!t.firstChild){t.focus();return}var n=window.getSelection(),i=document.createRange();e!==void 0?(i.setStart(t.firstChild,e),i.setEnd(t.firstChild,1)):(i.selectNodeContents(t),i.collapse(!1)),n.removeAllRanges(),n.addRange(i)}else console.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301window.getSelection")}function I(t,e){if(!!e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function gt(t){return window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle}function P(t){if(I(t,"body"))return t;var e=gt(t.parentElement);return["auto","scroll"].includes(e.overflow)||["auto","scroll"].includes(e["overflow-x"])||["auto","scroll"].includes(e["overflow-y"])?t.parentElement:P(t.parentElement)}function _t(t){const e=[];function n(i){const s=P(i);I(s,"body")||s&&(e.push(s),n(s))}return n(t),e}const vt={name:"commentInput",data(){return{content:"",showUsrs:!1,atUsrs:["\u7528\u62371","\u7528\u62372","\u7528\u62373"]}},methods:{onInput(t){const e=t.target.innerHTML,n=e.split("@"),i=this.content.split("@");n.length-i.length==1&&(this.isInputAt=!0,this.showAtPop()),this.content=e},onPaste(t){let e=(t.clipboardData||window.clipboardData).getData("text");document.execCommand("insertHTML",!1,e)},onSubmit(){const{input:t}=this.$refs;let e=t.innerHTML;const i=[...t.querySelectorAll(".at")].map(s=>(e=e.replace(new RegExp(s.outerHTML+"(&nbsp;)?"),""),{name:s.getAttribute("data-name")}));if(!e){alert("\u8BF7\u8F93\u5165\u5185\u5BB9");return}this.init(),this.$emit("submit",{content:e,usrs:i})},showAtPop(){const t=window.getSelection&&window.getSelection();this.atPrevEl=t&&t.focusNode&&t.focusNode.previousElementSibling,this.atOffset=t&&t.focusOffset,!this.atOffset&&this.atOffset!==0&&(this.atOffset=null),this.showUsrs=!0},onClickAtItem({key:t}){const{input:e}=this.$refs;let n=[t],i=e.innerHTML;this.showUsrs=!1;const s=n.map(o=>`<span class="at" data-userId="${o}" data-name="${o}" onclick="return false;" contenteditable="false">@${o}</span>&nbsp;`).join("");if(!s){this.isInputAt=!1;return}if(this.isInputAt)if(this.atPrevEl){const o=this.atPrevEl.outerHTML+"",r=o+"&nbsp;",l=o+"@",f=r+"@",_=o+s,M=r+s;i.match(f)?i=i.replace(f,M):i.match(l)?i=i.replace(l,_):(i[i.length-1]==="@"&&(i=i.slice(0,i.length-1)),i+=s)}else i[i.length-1]==="@"&&(i=i.slice(0,i.length-1)),i+=s;else i+=s;this.content=e.innerHTML=i,pt(e),this.isInputAt=!1},init(){const{input:t}=this.$refs;this.content=t.innerHTML=""}}},yt={class:"comment-input"},St={class:"comment-input-content"},wt={class:"edit placeholder"},bt={class:"ant-dropdown-menu"},Wt=["onClick"],Lt={class:"comment-input-toolbar"},Et=X("@"),Mt=X("\u63D0\u4EA4");function Ot(t,e,n,i,s,o){const r=h("a-button");return a(),u("div",yt,[c("div",St,[w(c("div",wt,"\u8BF7\u8F93\u5165...",512),[[b,!s.content]]),c("div",{ref:"input",class:"edit",contenteditable:"",onInput:e[0]||(e[0]=(...l)=>o.onInput&&o.onInput(...l)),onPaste:e[1]||(e[1]=T((...l)=>o.onPaste&&o.onPaste(...l),["prevent"])),onKeydown:e[2]||(e[2]=et(T((...l)=>o.onSubmit&&o.onSubmit(...l),["ctrl"]),["enter"]))},null,544),w(c("div",bt,[(a(!0),u(S,null,v(s.atUsrs,l=>(a(),u("div",{class:"ant-dropdown-menu-item",key:l,onClick:f=>o.onClickAtItem({key:l})},y(l),9,Wt))),128))],512),[[b,s.showUsrs]])]),c("div",Lt,[m(r,{type:"link",onClick:o.showAtPop},{default:d(()=>[Et]),_:1},8,["onClick"]),m(r,{type:"link",onClick:o.onSubmit},{default:d(()=>[Mt]),_:1},8,["onClick"])])])}var R=L(vt,[["render",Ot]]);const Ct={name:"scrollBar",props:{scroller:HTMLElement},data(){return{style:null,outStyle:null}},watch:{scroller:"init"},methods:{init(t,e){!this.scroller||(this.scrollers=_t(this.$el).filter(n=>n!==this.scroller),!!this.scrollers.length&&(this.scrollers.forEach(n=>n.addEventListener("scroll",this.update)),window.addEventListener("resize",this.update),this.update()))},onScrollBarMounseMove(t){if(!this.dragging)return;let e=this.initScrollBarLeft+t.clientX-this.clientX;e<0&&(e=0),e+this.initScrollBarWidth>this.scroller.clientWidth&&(e=this.scroller.clientWidth-this.initScrollBarWidth);const n=e/this.scroller.clientWidth;this.scroller.scrollLeft=this.scroller.scrollWidth*n,this.nextLeft=e,Object.assign(this.style,{transform:`translateX(${this.nextLeft}px)`})},onScrollBarMounseUp(){!this.dragging||(document.removeEventListener("mousemove",this.onScrollBarMounseMove),document.removeEventListener("mouseup",this.onScrollBarMounseUp),this.initScrollBarLeft=this.nextLeft,this.dragging=!1,document.body.style.userSelect=this.prevUserSelect)},onScrollBarMouseDown(t){!this.style||(document.addEventListener("mousemove",this.onScrollBarMounseMove),document.addEventListener("mouseup",this.onScrollBarMounseUp),this.dragging=!0,this.clientX=t.clientX,this.prevUserSelect=document.body.style.userSelect,document.body.style.userSelect="none")},onUpate(t){const e=t&&t.type!=="resize";if(e){if(t.target.scrollTop===t.target._prevScrollTop)return;t.target._prevScrollTop=t.target.scrollTop}if(!this.scroller||this.scroller.scrollWidth===this.scroller.clientWidth)return;const n=(e?t.target:this.scrollers[0])||document.body,i=n.getBoundingClientRect(),s=n.offsetHeight-n.clientHeight||0,o=this.scroller.getBoundingClientRect(),r=o.bottom>i.bottom;if(this.outStyle={left:o.left+"px",top:i.bottom-15-s+"px",width:this.scroller.clientWidth+"px"},r){const l=this.scroller.scrollWidth-this.scroller.clientWidth,f=this.scroller.scrollLeft,_=this.scroller.clientWidth/this.scroller.scrollWidth;this.initScrollBarWidth=this.scroller.clientWidth*_,this.initScrollBarLeft=(this.scroller.clientWidth-this.initScrollBarWidth)*f/l,this.style={width:`${this.initScrollBarWidth}px`,transform:`translateX(${this.initScrollBarLeft}px)`}}else this.style=null}},mounted(){this.update=x(100,this.onUpate),this.init()},beforeDestroy(){window.removeEventListener("resize",this.update),this.scrollers&&this.scrollers.forEach(t=>t.removeEventListener("scroll",this.update))}};function kt(t,e,n,i,s,o){return w((a(),u("div",{class:"suspending-scrollbar",style:g(s.outStyle)},[c("div",{class:"scrollbar-inner",style:g(s.style),onMousedown:e[0]||(e[0]=(...r)=>o.onScrollBarMouseDown&&o.onScrollBarMouseDown(...r))},null,36)],4)),[[b,s.style]])}var D=L(Ct,[["render",kt]]);const Xt={name:"scaleTool",props:{data:{type:Array,default:()=>[]},type:String,scroller:HTMLElement,content:HTMLElement},data(){return{dragging:!1,width:180,height:86,isClose:!1,dragWinStyle:null,targetStyle:null,targetItemStyle:null,scaleVal:100}},watch:{scroller(t,e){this.offScrollerEvents(e),this.init({init:!0})},content(t,e){this.offContentEvents(e),this.init({init:!0})},data:{handler(t){this.setTargetItemStyle()},immediate:!0}},methods:{onMouseDown(t){this.dragging=!0,this.clicked=!0,this.startX=t.clientX,this.startY=t.clientY,this.startOffsetX=this.offsetX,this.startOffsetY=this.offsetY,document.body.addEventListener("mouseup",this.onMouseUp)},onMouseMove(t){if(!this.dragging)return;const e=t.clientX-this.startX,n=t.clientY-this.startY;let i=this.startOffsetX+e,s=this.startOffsetY+n;i<0?i=0:i>this.width-this.dragWinWidth&&(i=this.width-this.dragWinWidth),s<0?s=0:s>this.height-this.dragWinHeight&&(s=this.height-this.dragWinHeight),this.offsetX=i,this.offsetY=s,this.updateWin(),this.contentOffsetX=(this.offsetX-this.initOffsetX)/-this.scale,this.contentOffsetY=(this.offsetY-this.initOffsetY)/-this.scale,this.updateContent()},onMouseUp(t){this.dragging=!1,this.scroller.style.cursor="grab",this.scroller.removeEventListener("mousemove",this.onContentMouseMove),document.body.removeEventListener("mouseup",this.onMouseUp),setTimeout(()=>{window.isDragged=!1},200)},onWheel(t){const{deltaY:e}=t;if(e){let n=this.contentOffsetY-e,i=n*-this.scale+this.initOffsetY;i<0?(i=0,n=(i-this.initOffsetY)/-this.scale):i>this.height-this.dragWinHeight&&(i=this.height-this.dragWinHeight,n=(i-this.initOffsetY)/-this.scale),this.offsetY=i,this.updateWin(),this.contentOffsetY=n,this.updateContent()}},onContentMouseMove(t){if(!this.dragging)return;this.scroller.style.cursor="grabbing";const e=t.clientX-this.contentStartX,n=t.clientY-this.contentStartY;(Math.abs(e)>100||Math.abs(n)>100)&&(window.isDragged=!0);let i=this.contentStartOffsetX+e,s=this.contentStartOffsetY+n,o=i*-this.scale+this.initOffsetX,r=s*-this.scale+this.initOffsetY;o<0?(o=0,i=(o-this.initOffsetX)/-this.scale):o>this.width-this.dragWinWidth&&(o=this.width-this.dragWinWidth,i=(o-this.initOffsetX)/-this.scale),r<0?(r=0,s=(r-this.initOffsetY)/-this.scale):r>this.height-this.dragWinHeight&&(r=this.height-this.dragWinHeight,s=(r-this.initOffsetY)/-this.scale),this.contentOffsetX=i,this.contentOffsetY=s,this.updateContent(),this.offsetX=o,this.offsetY=r,this.updateWin()},onContentMouseDown(t){this.dragging=!0,this.clicked=!0,this.contentStartX=t.clientX,this.contentStartY=t.clientY,this.contentStartOffsetX=this.contentOffsetX,this.contentStartOffsetY=this.contentOffsetY,this.scroller.addEventListener("mousemove",this.onContentMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},updateContent(t){const{animate:e}=t||{};this.content?(this.style={minWidth:"100%",minHeight:"100%",transform:`
              scale(${this.scaleVal/100}) translate3d(${this.contentOffsetX}px, ${this.contentOffsetY}px, 0)
            `,"transform-origin":"left top",transition:e?"all 0.3s ease-in-out":""},Object.assign(this.content.style,this.style)):console.error("props content \u4E0D\u5B58\u5728")},setScale(t){this.scaleVal=t,this.updateContent()},changeScale(t){t?this.scaleVal+=10:this.scaleVal-=10,this.scaleVal>150?this.scaleVal=150:this.scaleVal<0&&(this.scaleVal=0),this.updateContent({animate:!0})},offScrollerEvents(t){!t||(t.removeEventListener("wheel",this.onWheel),t.removeEventListener("mousedown",this.onContentMouseDown),t.removeEventListener("mousemove",this.onContentMouseMove))},offContentEvents(t){!t||mt(t,this.onResize)},updateWin(){this.dragWinStyle=C(O({},this.dragWinStyle||{}),{transform:`translate3d(${this.offsetX}px, ${this.offsetY}px, 0)`})},setTargetItemStyle(){this.targetItemStyle={width:`${230*this.scale}px`,height:`${this.data.length<=1?25:this.targetHeight/this.data.length}px`}},initWin(){let t=this.content.offsetWidth,e=this.content.offsetHeight,n=this.scroller.offsetWidth,i=this.scroller.offsetHeight,s=(this.width-40)/t,o=(this.height-20)/e;this.scale=Math.min(s,o),this.targetWidth=t*this.scale,this.targetHeight=e*this.scale,this.targetStyle={width:`${this.targetWidth}px`,height:`${this.targetHeight}px`},this.dragWinWidth=n*this.scale,this.dragWinHeight=i*this.scale,this.dragWinStyle=C(O({},this.dragWinStyle||{}),{left:0,top:0,width:`${this.dragWinWidth}px`,height:`${this.dragWinHeight}px`}),this.initOffsetX=(this.width-this.targetWidth)/2,this.initOffsetY=(this.height-this.targetHeight)/2,this.setTargetItemStyle(),this.clicked||(this.offsetX=this.initOffsetX,this.offsetY=this.initOffsetY,this.type==="tb"&&(this.offsetX+=(this.targetWidth-this.dragWinWidth)/2,this.contentOffsetX=(this.offsetX-this.initOffsetX)/-this.scale),this.updateWin(),this.updateContent())}},mounted(){this.init=x(200,t=>{const{init:e}=t||{};if(!this.scroller&&!this.content){console.error("props scroller \u548C content \u4E0D\u5B58\u5728");return}this.clicked=!1,this.offsetX=0,this.offsetY=0,this.contentOffsetX=0,this.contentOffsetY=0,this.scaleVal=100,e&&(this.scroller.style.userSelect="none",this.scroller.style.overflow="hidden",this.scroller.style.cursor="grab",this.scroller.addEventListener("wheel",this.onWheel),this.scroller.addEventListener("mousedown",this.onContentMouseDown),ut(this.content,this.onResize)),this.initWin()}),this.onResize=x(200,()=>{this.initWin()}),this.init({init:!0})},beforeDestroy(){this.offScrollerEvents(this.scroller),this.offContentEvents(this.content),document.body.removeEventListener("mouseup",this.onMouseUp)}},xt={class:"window-content"},Yt={class:"scale-toolbar"},Ht={class:"btn-fold-box"},Bt={class:"scale"},Tt={class:"text"};function At(t,e,n,i,s,o){return a(),u("div",{class:"scale-tool",style:g({width:s.width+"px"})},[c("div",{class:W(["window",{close:s.isClose}]),style:g({height:s.height+"px"}),onMousemove:e[1]||(e[1]=(...r)=>o.onMouseMove&&o.onMouseMove(...r))},[w(c("div",xt,[c("div",{class:W(["target",{center:n.type==="tb"}]),style:g(s.targetStyle)},[(a(!0),u(S,null,v(n.data,(r,l)=>(a(),u("div",{class:"target-item",key:l,style:g(s.targetItemStyle)},null,4))),128))],6),c("div",{class:W(["drag-window",{dragging:s.dragging}]),style:g(s.dragWinStyle),onMousedown:e[0]||(e[0]=(...r)=>o.onMouseDown&&o.onMouseDown(...r))},null,38)],512),[[b,!s.isClose]])],38),c("div",Yt,[c("div",Ht,[c("div",{class:W(["btn-fold iconfont icon-arrow-down",{close:s.isClose}]),onClick:e[2]||(e[2]=r=>s.isClose=!s.isClose)},null,2)]),c("div",Bt,[c("div",{class:"btn-minus el-icon-remove-outline",onClick:e[3]||(e[3]=r=>o.changeScale(!1))},"-"),c("div",Tt,y(s.scaleVal)+"%",1),c("div",{class:"btn-add el-icon-circle-plus-outline",onClick:e[4]||(e[4]=r=>o.changeScale(!0))},"+")])])],4)}var z=L(Xt,[["render",At]]),It={install(t,e){t.component(R.name,R),t.component(D.name,D),t.component(z.name,z)}};st(ct).use(ft).use(it).use(It).mount("#app");export{L as _};
